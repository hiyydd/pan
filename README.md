# ç®€æ˜“ç½‘ç›˜ (Simple Netdisk)

â­ å¦‚æžœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹äº®å³ä¸Šè§’çš„ **Star** æ”¯æŒæˆ‘ä»¬ï¼æ‚¨çš„é¼“åŠ±æ˜¯æˆ‘ä»¬æŒç»­å¼€å‘çš„åŠ¨åŠ›ï¼


## è®¸å¯è¯ (License)
æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** å¼€æºï¼Œå…è®¸è‡ªç”±ä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹ã€åˆ†å‘åŠç”¨äºŽå•†ä¸šç”¨é€”ï¼Œä»…éœ€åœ¨è¡ç”Ÿä½œå“ä¸­ä¿ç•™åŽŸä½œè€…çš„ç‰ˆæƒå£°æ˜Žï¼ˆå…·ä½“æ¡æ¬¾è¯·å‚è€ƒä»“åº“å†… LICENSE æ–‡ä»¶ï¼‰ã€‚


## ç®€ä»‹ (Introduction)
è¿™æ˜¯ä¸€ä¸ªåŸºäºŽ React å’Œ Flask æž„å»ºçš„ç®€æ˜“ç½‘ç›˜åº”ç”¨ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå®‰å…¨ã€ç®€å•ã€å…è´¹çš„æ–‡ä»¶å­˜å‚¨æœåŠ¡ã€‚å®ƒæ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼çš„ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤å’Œæœç´¢åŠŸèƒ½ï¼Œå¹¶å…·å¤‡å“åº”å¼è®¾è®¡ï¼Œå…¼å®¹æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡ã€‚

This is a simple netdisk application built with React and Flask, aiming to provide a secure, simple, and free file storage service. It supports uploading, downloading, deleting, and searching various file formats, and features a responsive design compatible with both desktop and mobile devices.


## åŠŸèƒ½ç‰¹æ€§ (Features)
- âœ¨ æ–‡ä»¶ä¸Šä¼  (File Upload)ï¼šæ”¯æŒæ‹–æ‹½å’Œç‚¹å‡»ä¸Šä¼ å¤šç§æ–‡ä»¶æ ¼å¼
- ðŸ“ æ–‡ä»¶åˆ—è¡¨ (File Listing)ï¼šæ˜¾ç¤ºå·²ä¸Šä¼ çš„æ–‡ä»¶ï¼ŒåŒ…å«æ–‡ä»¶åã€å¤§å°ã€ä¸Šä¼ æ—¶é—´
- â¬‡ï¸ æ–‡ä»¶ä¸‹è½½ (File Download)ï¼šæ”¯æŒä¸‹è½½å·²ä¸Šä¼ çš„æ–‡ä»¶
- ðŸ—‘ï¸ æ–‡ä»¶åˆ é™¤ (File Deletion)ï¼šæ”¯æŒåˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶
- ðŸ” æ–‡ä»¶æœç´¢ (File Search)ï¼šå®žæ—¶æœç´¢æ–‡ä»¶å
- ðŸŒ“ ä¸»é¢˜åˆ‡æ¢ (Theme Toggle)ï¼šæ”¯æŒæ˜Žæš—ä¸»é¢˜åˆ‡æ¢
- ðŸ“± å“åº”å¼è®¾è®¡ (Responsive Design)ï¼šå…¼å®¹æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡


## ç³»ç»Ÿè¦æ±‚ (System Requirements)

### å¿…éœ€è½¯ä»¶ (Required Software)
| è½¯ä»¶ (Software) | æœ€ä½Žç‰ˆæœ¬ (Minimum Version) | æŽ¨èç‰ˆæœ¬ (Recommended Version) | ä¸‹è½½é“¾æŽ¥ (Download Link)       |
|-----------------|----------------------------|--------------------------------|--------------------------------|
| Node.js         | 16.0.0                     | 18.0.0+                        | [nodejs.org](https://nodejs.org) |
| Python          | 3.8.0                      | 3.11.0+                        | [python.org](https://python.org) |
| npm             | 8.0.0                      | 9.0.0+                        | éš Node.js å®‰è£… (Included with Node.js) |
| Git             | 2.20.0                     | æœ€æ–°ç‰ˆ (Latest)                | [git-scm.com](https://git-scm.com) |

### æ”¯æŒçš„æ“ä½œç³»ç»Ÿ (Supported Operating Systems)
- âœ… Windows 10/11 (x64)
- âœ… macOS 10.15+ (Intel/Apple Silicon)
- âœ… Linux (Ubuntu 18.04+, CentOS 7+, Debian 10+)

### æµè§ˆå™¨æ”¯æŒ (Browser Support)
- âœ… Chrome 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… Edge 90+


## æŠ€æœ¯æ ˆ (Technology Stack)

### å‰ç«¯ (Frontend)
- React 18 - çŽ°ä»£åŒ–çš„å‰ç«¯æ¡†æž¶ (Modern frontend framework)
- Vite - å¿«é€Ÿçš„æž„å»ºå·¥å…· (Fast build tool)
- Tailwind CSS - å®žç”¨ä¼˜å…ˆçš„CSSæ¡†æž¶ (Utility-first CSS framework)
- Lucide React - çŽ°ä»£åŒ–çš„å›¾æ ‡åº“ (Modern icon library)
- shadcn/ui - é«˜è´¨é‡çš„UIç»„ä»¶åº“ (High-quality UI component library)

### åŽç«¯ (Backend)
- Flask - è½»é‡çº§çš„Python Webæ¡†æž¶ (Lightweight Python web framework)
- SQLAlchemy - Python SQLå·¥å…·åŒ…å’ŒORM (Python SQL toolkit and ORM)
- Flask-CORS - è·¨åŸŸèµ„æºå…±äº«æ”¯æŒ (Cross-origin resource sharing support)
- SQLite - è½»é‡çº§æ•°æ®åº“ (Lightweight database)


## é¡¹ç›®ç»“æž„ (Project Structure)
```
netdisk-project/
â”œâ”€â”€ netdisk/                    # å‰ç«¯é¡¹ç›® (Frontend project)
â”‚   â”œâ”€â”€ public/                 # é™æ€èµ„æº (Static assets)
â”‚   â”‚   â””â”€â”€ favicon.ico
â”‚   â”œâ”€â”€ src/                    # æºä»£ç  (Source code)
â”‚   â”‚   â”œâ”€â”€ components/         # Reactç»„ä»¶ (React components)
â”‚   â”‚   â”‚   â”œâ”€â”€ FileList.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUpload.jsx
â”‚   â”‚   â”‚   â””â”€â”€ SearchBar.jsx
â”‚   â”‚   â”œâ”€â”€ assets/             # é™æ€èµ„æº (Static assets)
â”‚   â”‚   â”œâ”€â”€ App.jsx             # ä¸»åº”ç”¨ç»„ä»¶ (Main app component)
â”‚   â”‚   â”œâ”€â”€ main.jsx            # å…¥å£æ–‡ä»¶ (Entry file)
â”‚   â”‚   â””â”€â”€ index.css           # å…¨å±€æ ·å¼ (Global styles)
â”‚   â”œâ”€â”€ index.html              # HTMLæ¨¡æ¿ (HTML template)
â”‚   â”œâ”€â”€ package.json            # npmåŒ…é…ç½® (npm package config)
â”‚   â”œâ”€â”€ vite.config.js          # Viteé…ç½® (Vite configuration)
â”‚   â””â”€â”€ tailwind.config.js      # Tailwindé…ç½® (Tailwind config)
â”œâ”€â”€ netdisk-backend/            # åŽç«¯é¡¹ç›® (Backend project)
â”‚   â”œâ”€â”€ src/                    # æºä»£ç  (Source code)
â”‚   â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡åž‹ (Data models)
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py         # ç”¨æˆ·æ¨¡åž‹ (User model)
â”‚   â”‚   â”‚   â””â”€â”€ file.py         # æ–‡ä»¶æ¨¡åž‹ (File model)
â”‚   â”‚   â”œâ”€â”€ routes/             # APIè·¯ç”± (API routes)
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py         # ç”¨æˆ·API (User APIs)
â”‚   â”‚   â”‚   â””â”€â”€ files.py        # æ–‡ä»¶API (File APIs)
â”‚   â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡æœåŠ¡ (Business services)
â”‚   â”‚   â”‚   â””â”€â”€ google_drive.py # Google DriveæœåŠ¡ (Google Drive service)
â”‚   â”‚   â”œâ”€â”€ static/             # é™æ€æ–‡ä»¶ (Static files)
â”‚   â”‚   â””â”€â”€ main.py             # Flaskåº”ç”¨å…¥å£ (Flask app entry)
â”‚   â”œâ”€â”€ requirements.txt        # Pythonä¾èµ– (Python dependencies)
â”‚   â””â”€â”€ venv/                   # Pythonè™šæ‹ŸçŽ¯å¢ƒ (Python virtual environment)
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜Ž (Project documentation)
```
# ç®€æ˜“ç½‘ç›˜ (Simple Netdisk) å®Œæ•´éƒ¨ç½²æŒ‡å—ï¼ˆå«ç½‘ç»œé…ç½®ï¼‰
# Complete Simple Netdisk (Simple Netdisk) Complete Deployment Guide (Including Network Configuration)

## ç›®å½• / Table of Contents
1. [çŽ¯å¢ƒå‡†å¤‡](#1-çŽ¯å¢ƒå‡†å¤‡) / [Environment Preparation](#1-environment-preparation)
2. [æºç èŽ·å–](#2-æºç èŽ·å–) / [Source Code Acquisition](#2-source-code-acquisition)
3. [å‰ç«¯éƒ¨ç½²](#3-å‰ç«¯éƒ¨ç½²) / [Frontend Deployment](#3-frontend-deployment)
4. [åŽç«¯éƒ¨ç½²](#4-åŽç«¯éƒ¨ç½²) / [Backend Deployment](#4-backend-deployment)
5. [é…ç½®è¯´æ˜Ž](#5-é…ç½®è¯´æ˜Ž) / [Configuration Instructions](#5-configuration-instructions)
6. [Dockerä¸€ç«™å¼éƒ¨ç½²](#6-dockerä¸€ç«™å¼éƒ¨ç½²) / [Docker One-click Deployment](#6-docker-one-click-deployment)
7. [ç½‘ç»œé…ç½®è¯¦è§£](#7-ç½‘ç»œé…ç½®è¯¦è§£) / [Detailed Network Configuration](#7-detailed-network-configuration)
8. [Nginxåå‘åå‘ä»£ç†é…ç½®](#8-nginxåå‘ä»£ç†é…ç½®) / [Nginx Reverse Proxy Proxy Configuration](#8-nginx-reverse-proxy-configuration)
9. [å¸¸è§é—®é¢˜æŽ’æŸ¥](#9-å¸¸è§é—®é¢˜æŽ’æŸ¥) / [Troubleshooting](#9-troubleshooting)


## 1. çŽ¯å¢ƒå‡†å¤‡
## 1. Environment Preparation

### 1.1 å¿…å¤‡å·¥å…·åŠç‰ˆæœ¬è¦æ±‚
### 1.1 Required Tools and Version Requirements
- **Git**ï¼šâ‰¥2.20.0
- **Node.js**ï¼šâ‰¥16.0.0 (æŽ¨è18.0.0+) / â‰¥16.0.0 (18.0.0+ recommended)
- **npm**ï¼šâ‰¥8.0.0 (éšNode.jså®‰è£…) / â‰¥8.0.0 (installed with Node.js)
- **Python**ï¼šâ‰¥3.8.0 (æŽ¨è3.11.0+) / â‰¥3.8.0 (3.11.0+ recommended)
- **pip**ï¼šPythonåŒ…ç®¡ç†å·¥å…· (é€šå¸¸éšPythonå®‰è£…) / Python package manager (usually installed with Python)
- **Docker** (å¯é€‰)ï¼šâ‰¥20.10.0 (ç”¨äºŽå®¹å™¨åŒ–éƒ¨ç½²) / (optional) â‰¥20.10.0 (for containerized deployment)
- **Docker Compose** (å¯é€‰)ï¼šâ‰¥v2.0.0 / (optional) â‰¥v2.0.0

### 1.2 æ“ä½œç³»ç»Ÿæ”¯æŒ
### 1.2 Supported Operating Systems
- Windows 10/11 (x64)
- macOS 10.15+ (Intel/Apple Silicon)
- Linux (Ubuntu 18.04+, CentOS 7+, Debian 10+)

### 1.3 å®‰è£…å‘½ä»¤
### 1.3 Installation Commands

#### Ubuntu/Debian
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…Git
sudo apt install git -y

# å®‰è£…Node.jså’Œnpm (ä½¿ç”¨NodeSource)
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# å®‰è£…PythonåŠç›¸å…³å·¥å…·
sudo apt install python3 python3-pip python3-venv -y
```

#### CentOS/RHEL
```bash
# å®‰è£…Git
sudo yum install git -y

# å®‰è£…Node.jså’Œnpm
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo -E bash -
sudo yum install nodejs -y

# å®‰è£…PythonåŠç›¸å…³å·¥å…·
sudo yum install python3 python3-pip -y
```

#### macOS (ä½¿ç”¨Homebrew)
#### macOS (using Homebrew)
```bash
# å®‰è£…Homebrew (å¦‚æœªå®‰è£…)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£…æ‰€éœ€å·¥å…·
brew install git node@18 python3
```

#### Windows
- Git: ä¸‹è½½å¹¶å®‰è£… [Git for Windows](https://git-scm.com/download/win)
- Node.js: ä¸‹è½½å¹¶å®‰è£… [Node.js 18.x](https://nodejs.org/en/download/)
- Python: ä¸‹è½½å¹¶å®‰è£… [Python 3.11](https://www.python.org/downloads/)
  > å®‰è£…æ—¶å‹¾é€‰ "Add Python to PATH" / Check "Add Python to PATH" during installation


## 2. æºç èŽ·å–
## 2. Source Code Acquisition

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/hiyydd/pan.git
cd pan
```


## 3. å‰ç«¯éƒ¨ç½²
## 3. Frontend Deployment

å‰ç«¯é¡¹ç›®ä½äºŽ `netdisk` ç›®å½•ï¼ŒåŸºäºŽReactå’ŒViteæž„å»ºã€‚
The frontend project is located in the `netdisk` directory, built with React and Vite.

### 3.1 å®‰è£…ä¾èµ–
### 3.1 Install Dependencies
```bash
cd netdisk
npm install
```

### 3.2 é…ç½®å‰ç«¯çŽ¯å¢ƒ
### 3.2 Configure Frontend Environment
åˆ›å»ºå¹¶é…ç½®çŽ¯å¢ƒå˜é‡æ–‡ä»¶ï¼š
Create and configure environment variable file:
```bash
# åœ¨netdiskç›®å½•ä¸‹åˆ›å»º.env.productionæ–‡ä»¶
cat > .env.production << EOF
# APIåŸºç¡€è·¯å¾„ï¼Œæ ¹æ®å®žé™…åŽç«¯åœ°å€ä¿®æ”¹
VITE_API_BASE_URL=/api
# ç½‘ç«™æ ‡é¢˜
VITE_APP_TITLE=ç®€æ˜“ç½‘ç›˜
# æœ€å¤§ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶(MB)
VITE_MAX_UPLOAD_SIZE=1024
EOF
```

```bash
# Create .env.production file in netdisk directory
cat > .env.production << EOF
# API base path, modify according to actual backend address
VITE_API_BASE_URL=/api
# Website title
VITE_APP_TITLE=Simple Netdisk
# Maximum upload file size limit (MB)
VITE_MAX_UPLOAD_SIZE=1024
EOF
```

### 3.3 æž„å»ºç”Ÿäº§ç‰ˆæœ¬
### 3.3 Build Production Version
```bash
# æ‰§è¡Œæž„å»ºå‘½ä»¤
npm run build
```

```bash
# Execute build command
npm run build
```

æž„å»ºå®ŒæˆåŽï¼Œä¼šåœ¨ `netdisk/dist` ç›®å½•ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å°†è¢«åŽç«¯æœåŠ¡å¼•ç”¨ã€‚
After the build is complete, static files will be generated in the `netdisk/dist` directory, which will be referenced by the backend service.


## 4. åŽç«¯éƒ¨ç½²
## 4. Backend Deployment

åŽç«¯é¡¹ç›®ä½äºŽ `netdisk-backend` ç›®å½•ï¼ŒåŸºäºŽFlaskæž„å»ºã€‚
The backend project is located in the `netdisk-backend` directory, built with Flask.

### 4.1 å‡†å¤‡Pythonè™šæ‹ŸçŽ¯å¢ƒ
### 4.1 Prepare Python Virtual Environment
```bash
# è¿”å›žé¡¹ç›®æ ¹ç›®å½•
cd ..
# è¿›å…¥åŽç«¯ç›®å½•
cd netdisk-backend
# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
# Linux/macOS
source venv/bin/activate
# Windows (PowerShell)
.\venv\Scripts\Activate.ps1
# Windows (Command Prompt)
venv\Scripts\activate.bat
```

```bash
# Return to project root directory
cd ..
# Enter backend directory
cd netdisk-backend
# Create virtual environment
python3 -m venv venv

# Activate virtual environment
# Linux/macOS
source venv/bin/activate
# Windows (PowerShell)
.\venv\Scripts\Activate.ps1
# Windows (Command Prompt)
venv\Scripts\activate.bat
```

### 4.2 å®‰è£…åŽç«¯ä¾èµ–
### 4.2 Install Backend Dependencies
```bash
pip install -r requirements.txt
# ç”Ÿäº§çŽ¯å¢ƒå»ºè®®å®‰è£…Gunicornä½œä¸ºWSGIæœåŠ¡å™¨
pip install gunicorn
```

```bash
pip install -r requirements.txt
# It is recommended to install Gunicorn as WSGI server for production environment
pip install gunicorn
```

### 4.3 é…ç½®åŽç«¯çŽ¯å¢ƒ
### 4.3 Configure Backend Environment
```bash
# åœ¨netdisk-backendç›®å½•ä¸‹åˆ›å»º.envæ–‡ä»¶
cat > .env << EOF
#  Flaské…ç½®
FLASK_APP=src.main:app
FLASK_ENV=production
SECRET_KEY=your_secure_secret_key_here  # æ›´æ¢ä¸ºéšæœºå®‰å…¨å¯†é’¥

# æ•°æ®åº“é…ç½®
DATABASE_URI=sqlite:///./netdisk.db  # SQLiteæ•°æ®åº“è·¯å¾„

# æ–‡ä»¶å­˜å‚¨é…ç½®
UPLOAD_FOLDER=./uploads  # æ–‡ä»¶ä¸Šä¼ ç›®å½•
MAX_CONTENT_LENGTH=1073741824  # 1GBï¼Œä¸Žå‰ç«¯ä¿æŒä¸€è‡´

# æœåŠ¡å™¨é…ç½®
HOST=0.0.0.0
PORT=5000
EOF
```

```bash
# Create .env file in netdisk-backend directory
cat > .env << EOF
# Flask configuration
FLASK_APP=src.main:app
FLASK_ENV=production
SECRET_KEY=your_secure_secret_key_here  # Replace with random secure key

# Database configuration
DATABASE_URI=sqlite:///./netdisk.db  # SQLite database path

# File storage configuration
UPLOAD_FOLDER=./uploads  # File upload directory
MAX_CONTENT_LENGTH=1073741824  # 1GB, consistent with frontend

# Server configuration
HOST=0.0.0.0
PORT=5000
EOF
```

### 4.4 å¤åˆ¶å‰ç«¯æž„å»ºäº§ç‰©åˆ°åŽç«¯
### 4.4 Copy Frontend Build Products to Backend
```bash
# ç¡®ä¿å·²æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒï¼Œåœ¨netdisk-backendç›®å½•æ‰§è¡Œ
# åˆ›å»ºé™æ€æ–‡ä»¶ç›®å½•(å¦‚ä¸å­˜åœ¨)
mkdir -p src/static
# å¤åˆ¶å‰ç«¯æž„å»ºäº§ç‰©
cp -r ../netdisk/dist/* src/static/
```

```bash
# Ensure virtual environment is activated, execute in netdisk-backend directory
# Create static file directory if it doesn't exist
mkdir -p src/static
# Copy frontend build products
cp -r ../netdisk/dist/* src/static/
```

### 4.5 åˆå§‹åŒ–æ•°æ®åº“
### 4.5 Initialize Database
```bash
# è¿›å…¥Pythonäº¤äº’æ¨¡å¼
python3

# åœ¨Pythonäº¤äº’çŽ¯å¢ƒä¸­æ‰§è¡Œ
from src.main import app
from src.models import db
with app.app_context():
    db.create_all()
exit()
```

```bash
# Enter Python interactive mode
python3

# Execute in Python interactive environment
from src.main import app
from src.models import db
with app.app_context():
    db.create_all()
exit()
```

### 4.6 å¯åŠ¨åŽç«¯æœåŠ¡
### 4.6 Start Backend Service

#### å¼€å‘çŽ¯å¢ƒå¯åŠ¨ (ä»…ç”¨äºŽæµ‹è¯•)
#### Development Environment Startup (for testing only)
```bash
flask run --host=0.0.0.0 --port=5000
```

#### ç”Ÿäº§çŽ¯å¢ƒå¯åŠ¨ (ä½¿ç”¨Gunicorn)
#### Production Environment Startup (using Gunicorn)
```bash
# 4ä¸ªå·¥ä½œè¿›ç¨‹ï¼Œç»‘å®šåˆ°5000ç«¯å£
gunicorn -w 4 -b 0.0.0.0:5000 "src.main:app"
```

```bash
# 4 worker processes, bound to port 5000
gunicorn -w 4 -b 0.0.0.0:5000 "src.main:app"
```

#### ä½¿ç”¨systemdç®¡ç†æœåŠ¡ (Linux)
#### Managing Services with systemd (Linux)
åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š
Create service file:
```bash
sudo nano /etc/systemd/system/netdisk.service
```

æ–‡ä»¶å†…å®¹ï¼š
File content:
```ini
[Unit]
Description=Simple Netdisk Service
After=network.target

[Service]
User=your_username
Group=your_group
WorkingDirectory=/path/to/pan/netdisk-backend
ExecStart=/path/to/pan/netdisk-backend/venv/bin/gunicorn -w 4 -b 0.0.0.0:5000 "src.main:app"
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
Start service:
```bash
sudo systemctl daemon-reload
sudo systemctl start netdisk
sudo systemctl enable netdisk  # è®¾ç½®å¼€æœºè‡ªå¯ / set to start on boot
```


## 5. é…ç½®è¯´æ˜Ž
## 5. Configuration Instructions

### 5.1 å‰ç«¯å…³é”®é…ç½®æ–‡ä»¶
### 5.1 Key Frontend Configuration Files
- `netdisk/vite.config.js`: Viteæž„å»ºé…ç½®ï¼ŒåŒ…å«ä»£ç†è®¾ç½®ç­‰ / Vite build configuration, including proxy settings, etc.
- `netdisk/.env.production`: ç”Ÿäº§çŽ¯å¢ƒå˜é‡é…ç½® / Production environment variable configuration
- `netdisk/tailwind.config.js`: Tailwind CSSé…ç½® / Tailwind CSS configuration

### 5.2 åŽç«¯å…³é”®é…ç½®æ–‡ä»¶
### 5.2 Key Backend Configuration Files
- `netdisk-backend/src/main.py`: Flaskåº”ç”¨å…¥å£ï¼ŒåŒ…å«è·¯ç”±æ³¨å†Œ / Flask application entry, including route registration
- `netdisk-backend/src/models/__init__.py`: æ•°æ®åº“æ¨¡åž‹å®šä¹‰ / Database model definition
- `netdisk-backend/src/routes/file_routes.py`: æ–‡ä»¶æ“ä½œAPIè·¯ç”± / File operation API routes
- `netdisk-backend/.env`: åŽç«¯çŽ¯å¢ƒå˜é‡é…ç½® / Backend environment variable configuration


## 6. Dockerä¸€ç«™å¼éƒ¨ç½²
## 6. Docker One-click Deployment

### 6.1 æž„å»ºDockeré•œåƒ
### 6.1 Build Docker Image

é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `Dockerfile`ï¼š
Create `Dockerfile` in project root directory:
```dockerfile
# æž„å»ºå‰ç«¯
FROM node:18-alpine AS frontend-build
WORKDIR /app/netdisk
COPY netdisk/package*.json ./
RUN npm install
COPY netdisk/ ./
RUN npm run build

# æž„å»ºåŽç«¯
FROM python:3.11-slim
WORKDIR /app

# å¤åˆ¶å‰ç«¯æž„å»ºäº§ç‰©
COPY --from=frontend-build /app/netdisk/dist ./netdisk-backend/src/static

# å¤åˆ¶åŽç«¯ä»£ç 
COPY netdisk-backend/ ./netdisk-backend
WORKDIR /app/netdisk-backend

# å®‰è£…åŽç«¯ä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt
RUN pip install gunicorn

# åˆ›å»ºæ•°æ®å’Œä¸Šä¼ ç›®å½•
RUN mkdir -p uploads
RUN touch netdisk.db

# é…ç½®çŽ¯å¢ƒå˜é‡
ENV FLASK_APP=src.main:app
ENV FLASK_ENV=production
ENV SECRET_KEY=default_docker_secret_key
ENV DATABASE_URI=sqlite:///./netdisk.db
ENV UPLOAD_FOLDER=./uploads
ENV MAX_CONTENT_LENGTH=1073741824

EXPOSE 5000

# å¯åŠ¨æœåŠ¡
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5000", "src.main:app"]
```

```dockerfile
# Build frontend
FROM node:18-alpine AS frontend-build
WORKDIR /app/netdisk
COPY netdisk/package*.json ./
RUN npm install
COPY netdisk/ ./
RUN npm run build

# Build backend
FROM python:3.11-slim
WORKDIR /app

# Copy frontend build products
COPY --from=frontend-build /app/netdisk/dist ./netdisk-backend/src/static

# Copy backend code
COPY netdisk-backend/ ./netdisk-backend
WORKDIR /app/netdisk-backend

# Install backend dependencies
RUN pip install --no-cache-dir -r requirements.txt
RUN pip install gunicorn

# Create data and upload directories
RUN mkdir -p uploads
RUN touch netdisk.db

# Configure environment variables
ENV FLASK_APP=src.main:app
ENV FLASK_ENV=production
ENV SECRET_KEY=default_docker_secret_key
ENV DATABASE_URI=sqlite:///./netdisk.db
ENV UPLOAD_FOLDER=./uploads
ENV MAX_CONTENT_LENGTH=1073741824

EXPOSE 5000

# Start service
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5000", "src.main:app"]
```

### 6.2 æž„å»ºå¹¶è¿è¡Œå®¹å™¨
### 6.2 Build and Run Container
```bash
# æž„å»ºé•œåƒ
docker build -t simple-netdisk:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name simple-netdisk \
  -p 5000:5000 \
  -v ./netdisk-backend/uploads:/app/netdisk-backend/uploads \
  -v ./netdisk-backend/netdisk.db:/app/netdisk-backend/netdisk.db \
  -e SECRET_KEY="your_secure_secret_key" \
  simple-netdisk:latest
```

```bash
# Build image
docker build -t simple-netdisk:latest .

# Run container
docker run -d \
  --name simple-netdisk \
  -p 5000:5000 \
  -v ./netdisk-backend/uploads:/app/netdisk-backend/uploads \
  -v ./netdisk-backend/netdisk.db:/app/netdisk-backend/netdisk.db \
  -e SECRET_KEY="your_secure_secret_key" \
  simple-netdisk:latest
```

### 6.3 ä½¿ç”¨Docker Compose (æŽ¨è)
### 6.3 Using Docker Compose (Recommended)

åˆ›å»º `docker-compose.yml`ï¼š
Create `docker-compose.yml`:
```yaml
version: '3.8'

services:
  netdisk:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: simple-netdisk
    restart: always
    ports:
      - "5000:5000"
    environment:
      - SECRET_KEY=your_secure_secret_key_here
      - DATABASE_URI=sqlite:///./netdisk.db
      - UPLOAD_FOLDER=./uploads
      - MAX_CONTENT_LENGTH=1073741824
    volumes:
      - netdisk-uploads:/app/netdisk-backend/uploads
      - netdisk-db:/app/netdisk-backend

volumes:
  netdisk-uploads:
  netdisk-db:
```

å¯åŠ¨æœåŠ¡ï¼š
Start service:
```bash
docker-compose up -d
```


## 7. ç½‘ç»œé…ç½®è¯¦è§£
## 7. Detailed Network Configuration

ç½‘ç»œé…ç½®æ˜¯ç¡®ä¿ç½‘ç›˜æœåŠ¡å¯è®¿é—®æ€§çš„å…³é”®éƒ¨åˆ†ï¼ŒåŒ…æ‹¬ç«¯å£è®¾ç½®ã€é˜²ç«å¢™é…ç½®ã€åŸŸåè§£æžç­‰ã€‚
Network configuration is a key part of ensuring the accessibility of the netdisk service, including port settings, firewall configuration, domain name resolution, etc.

### 7.1 ç«¯å£è§„åˆ’ä¸Žé…ç½®
### 7.1 Port Planning and Configuration

| æœåŠ¡ / Service | é»˜è®¤ç«¯å£ / Default Port | ç”¨é€” / Purpose | é…ç½®ä½ç½® / Configuration Location |
|------|---------|------|---------|
| åŽç«¯æœåŠ¡ / Backend Service | 5000 | åº”ç”¨ç¨‹åºé€šä¿¡ / Application communication | `netdisk-backend/.env` ä¸­çš„ `PORT` å˜é‡ / `PORT` variable in `netdisk-backend/.env` |
| Nginx HTTP | 80 | å¸¸è§„HTTPè®¿é—® / Regular HTTP access | Nginxé…ç½®æ–‡ä»¶ / Nginx configuration file |
| Nginx HTTPS | 443 | åŠ å¯†HTTPSè®¿é—® / Encrypted HTTPS access | Nginxé…ç½®æ–‡ä»¶ / Nginx configuration file |

**ä¿®æ”¹é»˜è®¤ç«¯å£æ–¹æ³•ï¼š**
**Method to modify default port:**
```bash
# ä¿®æ”¹åŽç«¯ç«¯å£
# ç¼–è¾‘netdisk-backend/.env
nano netdisk-backend/.env
# æ›´æ”¹PORTå€¼
PORT=8080

# å¦‚ä½¿ç”¨Gunicornï¼Œéœ€åŒæ­¥ä¿®æ”¹å¯åŠ¨å‘½ä»¤
gunicorn -w 4 -b 0.0.0.0:8080 "src.main:app"
```

```bash
# Modify backend port
# Edit netdisk-backend/.env
nano netdisk-backend/.env
# Change PORT value
PORT=8080

# If using Gunicorn, need to modify startup command synchronously
gunicorn -w 4 -b 0.0.0.0:8080 "src.main:app"
```

### 7.2 é˜²ç«å¢™é…ç½®
### 7.2 Firewall Configuration

#### 7.2.1 Linuxç³»ç»Ÿé˜²ç«å¢™ï¼ˆUFWï¼‰
#### 7.2.1 Linux System Firewall (UFW)
```bash
# å®‰è£…UFWï¼ˆå¦‚æœªå®‰è£…ï¼‰
sudo apt install ufw -y  # Debian/Ubuntu
sudo yum install ufw -y  # CentOS/RHEL

# å…è®¸SSHè¿žæŽ¥ï¼ˆé‡è¦ï¼Œé¿å…è¿œç¨‹è¿žæŽ¥æ–­å¼€ï¼‰
sudo ufw allow ssh

# å…è®¸HTTPè®¿é—®ï¼ˆ80ç«¯å£ï¼‰
sudo ufw allow 80/tcp

# å…è®¸HTTPSè®¿é—®ï¼ˆ443ç«¯å£ï¼‰
sudo ufw allow 443/tcp

# å…è®¸ç›´æŽ¥è®¿é—®åŽç«¯æœåŠ¡ï¼ˆ5000ç«¯å£ï¼Œå¦‚ä¸ä½¿ç”¨Nginxæ—¶ï¼‰
sudo ufw allow 5000/tcp

# å¯ç”¨é˜²ç«å¢™
sudo ufw enable

# æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
sudo ufw status
```

```bash
# Install UFW (if not installed)
sudo apt install ufw -y  # Debian/Ubuntu
sudo yum install ufw -y  # CentOS/RHEL

# Allow SSH connections (important to avoid remote connection disconnection)
sudo ufw allow ssh

# Allow HTTP access (port 80)
sudo ufw allow 80/tcp

# Allow HTTPS access (port 443)
sudo ufw allow 443/tcp

# Allow direct access to backend service (port 5000, if not using Nginx)
sudo ufw allow 5000/tcp

# Enable firewall
sudo ufw enable

# Check firewall status
sudo ufw status
```

#### 7.2.2 äº‘æœåŠ¡å™¨å®‰å…¨ç»„é…ç½®
#### 7.2.2 Cloud Server Security Group Configuration
å¦‚æžœä½¿ç”¨äº‘æœåŠ¡å™¨ï¼ˆAWSã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰ï¼Œè¿˜éœ€é…ç½®å®‰å…¨ç»„è§„åˆ™ï¼š
If using a cloud server (AWS, Alibaba Cloud, Tencent Cloud, etc.), you also need to configure security group rules:
1. ç™»å½•äº‘æœåŠ¡æŽ§åˆ¶å°ï¼Œæ‰¾åˆ°å¯¹åº”å®žä¾‹çš„å®‰å…¨ç»„é…ç½® / Log in to the cloud service console and find the security group configuration for the corresponding instance
2. æ·»åŠ å…¥ç«™è§„åˆ™ï¼Œå…è®¸ä»¥ä¸‹ç«¯å£ï¼š / Add inbound rules to allow the following ports:
   - 22/tcpï¼ˆSSHï¼‰
   - 80/tcpï¼ˆHTTPï¼‰
   - 443/tcpï¼ˆHTTPSï¼‰
   - 5000/tcpï¼ˆåŽç«¯æœåŠ¡ï¼Œå¦‚éœ€è¦ï¼‰ / Backend service, if needed
3. æºåœ°å€æ ¹æ®éœ€æ±‚è®¾ç½®ï¼ˆå»ºè®®é™åˆ¶SSHçš„æºåœ°å€ï¼‰ / Set the source address according to requirements (it is recommended to restrict the source address of SSH)

### 7.3 ç½‘ç»œè®¿é—®æŽ§åˆ¶
### 7.3 Network Access Control

#### 7.3.1 é™åˆ¶ç‰¹å®šIPè®¿é—®
#### 7.3.1 Restrict Access to Specific IPs
å¦‚éœ€é™åˆ¶åªæœ‰ç‰¹å®šIPèƒ½è®¿é—®ç½‘ç›˜æœåŠ¡ï¼Œå¯é…ç½®Nginxï¼š
To restrict access to the netdisk service to only specific IPs, you can configure Nginx:
```nginx
# åœ¨serverå—ä¸­æ·»åŠ 
allow 192.168.1.100;  # å…è®¸çš„IP
allow 10.0.0.0/24;    # å…è®¸çš„IPæ®µ
deny all;             # æ‹’ç»å…¶ä»–æ‰€æœ‰IP
```

```nginx
# Add in server block
allow 192.168.1.100;  # Allowed IP
allow 10.0.0.0/24;    # Allowed IP segment
deny all;             # Deny all other IPs
```

#### 7.3.2 CORSï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰é…ç½®
#### 7.3.2 CORS (Cross-Origin Resource Sharing) Configuration
åŽç«¯å·²é€šè¿‡Flask-CORSå¤„ç†è·¨åŸŸè¯·æ±‚ï¼Œç›¸å…³é…ç½®ä½äºŽï¼š
The backend handles cross-origin requests through Flask-CORS, and the relevant configuration is located in:
`netdisk-backend/src/main.py`
```python
# è·¨åŸŸé…ç½®
cors = CORS(app, resources={
    r"/api/*": {
        "origins": [
            "http://localhost",
            "http://your_domain.com",
            "https://your_domain.com"
        ],
        "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
        "allow_headers": ["Content-Type", "Authorization"]
    }
})
```
å¦‚éœ€ä¿®æ”¹ï¼Œå¯ç¼–è¾‘ä¸Šè¿°æ–‡ä»¶æ·»åŠ æˆ–ä¿®æ”¹å…è®¸çš„æºåœ°å€ã€‚
To modify, you can edit the above file to add or modify allowed origin addresses.

### 7.4 åŸŸåä¸ŽDNSé…ç½®
### 7.4 Domain Name and DNS Configuration

#### 7.4.1 åŸŸåè§£æžè®¾ç½®
#### 7.4.1 Domain Name Resolution Settings
1. åœ¨åŸŸå registrar å¤„æ·»åŠ DNSè®°å½•ï¼š / Add DNS records at the domain registrar:
   - Aè®°å½•ï¼šå°†åŸŸåæŒ‡å‘æœåŠ¡å™¨å…¬ç½‘IP / A record: point the domain name to the server's public IP
   - ï¼ˆå¯é€‰ï¼‰wwwè®°å½•ï¼šå°†wwwå­åŸŸåæŒ‡å‘åŒä¸€IP / (optional) www record: point the www subdomain to the same IP

#### 7.4.2 æœ¬åœ° hosts é…ç½®ï¼ˆæµ‹è¯•ç”¨ï¼‰
#### 7.4.2 Local hosts Configuration (for testing)
åœ¨æ²¡æœ‰åŸŸåçš„æƒ…å†µä¸‹ï¼Œå¯é€šè¿‡ä¿®æ”¹æœ¬åœ°hostsæ–‡ä»¶è¿›è¡Œæµ‹è¯•ï¼š
Without a domain name, you can test by modifying the local hosts file:
```
# Windows: C:\Windows\System32\drivers\etc\hosts
# Linux/macOS: /etc/hosts
æœåŠ¡å™¨IP  netdisk.test
```

```
# Windows: C:\Windows\System32\drivers\etc\hosts
# Linux/macOS: /etc/hosts
Server IP  netdisk.test
```

### 7.5 HTTPSé…ç½®ï¼ˆå®‰å…¨åŠ å¯†ï¼‰
### 7.5 HTTPS Configuration (Secure Encryption)

#### 7.5.1 ç”³è¯·å…è´¹SSLè¯ä¹¦ï¼ˆLet's Encryptï¼‰
#### 7.5.1 Apply for Free SSL Certificate (Let's Encrypt)
```bash
# å®‰è£…Certbot
sudo apt install certbot python3-certbot-nginx -y  # Debian/Ubuntu
sudo yum install certbot python3-certbot-nginx -y  # CentOS/RHEL

# èŽ·å–å¹¶é…ç½®è¯ä¹¦
sudo certbot --nginx -d your_domain.com -d www.your_domain.com
```

```bash
# Install Certbot
sudo apt install certbot python3-certbot-nginx -y  # Debian/Ubuntu
sudo yum install certbot python3-certbot-nginx -y  # CentOS/RHEL

# Obtain and configure certificate
sudo certbot --nginx -d your_domain.com -d www.your_domain.com
```

#### 7.5.2 é…ç½®è‡ªåŠ¨ç»­æœŸ
#### 7.5.2 Configure Automatic Renewal
```bash
# è®¾ç½®å®šæ—¶ä»»åŠ¡è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ä»¥ä¸‹å†…å®¹
0 12 * * * /usr/bin/certbot renew --quiet
```

```bash
# Set up cron job for automatic renewal
sudo crontab -e
# Add the following content
0 12 * * * /usr/bin/certbot renew --quiet
```

### 7.6 ç½‘ç»œæ€§èƒ½ä¼˜åŒ–
### 7.6 Network Performance Optimization

#### 7.6.1 è°ƒæ•´ä¸Šä¼ æ–‡ä»¶è¶…æ—¶è®¾ç½®
#### 7.6.1 Adjust Upload File Timeout Settings
åœ¨Nginxé…ç½®ä¸­å¢žåŠ è¶…æ—¶è®¾ç½®ï¼Œé€‚åº”å¤§æ–‡ä»¶ä¸Šä¼ ï¼š
Add timeout settings in Nginx configuration to accommodate large file uploads:
```nginx
server {
    # ... å…¶ä»–é…ç½® ...
    
    # ä¸Šä¼ è¶…æ—¶è®¾ç½®
    client_body_timeout 120s;
    send_timeout 120s;
    proxy_connect_timeout 120s;
    proxy_send_timeout 120s;
    proxy_read_timeout 120s;
}
```

```nginx
server {
    # ... other configurations ...
    
    # Upload timeout settings
    client_body_timeout 120s;
    send_timeout 120s;
    proxy_connect_timeout 120s;
    proxy_send_timeout 120s;
    proxy_read_timeout 120s;
}
```

#### 7.6.2 å¯ç”¨GzipåŽ‹ç¼©
#### 7.6.2 Enable Gzip Compression
åœ¨Nginxé…ç½®ä¸­å¯ç”¨åŽ‹ç¼©ï¼Œå‡å°‘ä¼ è¾“æ•°æ®é‡ï¼š
Enable compression in Nginx configuration to reduce data transmission volume:
```nginx
http {
    # ... å…¶ä»–é…ç½® ...
    
    gzip on;
    gzip_comp_level 5;
    gzip_min_length 256;
    gzip_proxied any;
    gzip_types
        application/javascript
        application/json
        application/x-javascript
        text/css
        text/javascript
        text/plain;
}
```

```nginx
http {
    # ... other configurations ...
    
    gzip on;
    gzip_comp_level 5;
    gzip_min_length 256;
    gzip_proxied any;
    gzip_types
        application/javascript
        application/json
        application/x-javascript
        text/css
        text/javascript
        text/plain;
}
```

#### 7.6.3 é…ç½®é™æ€èµ„æºç¼“å­˜
#### 7.6.3 Configure Static Resource Caching
```nginx
location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
    proxy_pass http://127.0.0.1:5000;
    expires 30d;
    add_header Cache-Control "public, max-age=2592000";
}
```

### 7.7 ç½‘ç»œå®‰å…¨å¢žå¼º
### 7.7 Network Security Enhancement

#### 7.7.1 ç¦ç”¨ä¸å¿…è¦çš„HTTPæ–¹æ³•
#### 7.7.1 Disable Unnecessary HTTP Methods
```nginx
if ($request_method !~ ^(GET|POST|HEAD|OPTIONS)$ ) {
    return 405;
}
```

#### 7.7.2 æ·»åŠ å®‰å…¨å“åº”å¤´
#### 7.7.2 Add Security Response Headers
```nginx
add_header X-Content-Type-Options "nosniff" always;
add_header X-Frame-Options "SAMEORIGIN" always;
add_header X-XSS-Protection "1; mode=block" always;
add_header Content-Security-Policy "default-src 'self'" always;
```


## 8. Nginxåå‘ä»£ç†é…ç½®
## 8. Nginx Reverse Proxy Configuration

ä¸ºæå‡å®‰å…¨æ€§å’Œæ€§èƒ½ï¼ŒæŽ¨èä½¿ç”¨Nginxä½œä¸ºåå‘ä»£ç†ã€‚
To improve security and performance, it is recommended to use Nginx as a reverse proxy.

åˆ›å»ºNginxé…ç½®æ–‡ä»¶ï¼š
Create Nginx configuration file:
```bash
sudo nano /etc/nginx/sites-available/netdisk
```

é…ç½®å†…å®¹ï¼š
Configuration content:
```nginx
server {
    listen 80;
    server_name your_domain.com;  # æ›¿æ¢ä¸ºä½ çš„åŸŸåæˆ–æœåŠ¡å™¨IP / Replace with your domain name or server IP

    # é‡å®šå‘åˆ°HTTPS (å¯é€‰)
    # return 301 https://$host$request_uri;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # é™åˆ¶ä¸Šä¼ æ–‡ä»¶å¤§å°
    client_max_body_size 1G;
}

# HTTPSé…ç½®ç¤ºä¾‹ (éœ€è¦SSLè¯ä¹¦)
# server {
#     listen 443 ssl;
#     server_name your_domain.com;
#
#     ssl_certificate /path/to/your/cert.pem;
#     ssl_certificate_key /path/to/your/key.pem;
#
#     location / {
#         proxy_pass http://127.0.0.1:5000;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
#
#     client_max_body_size 1G;
# }
```

å¯ç”¨é…ç½®ï¼š
Enable configuration:
```bash
sudo ln -s /etc/nginx/sites-available/netdisk /etc/nginx/sites-enabled/
sudo nginx -t  # æµ‹è¯•é…ç½® / test configuration
sudo systemctl restart nginx
```


## 9. å¸¸è§é—®é¢˜æŽ’æŸ¥
## 9. Troubleshooting

### 9.1 å‰ç«¯æž„å»ºå¤±è´¥
### 9.1 Frontend Build Failure
- æ£€æŸ¥Node.jsç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚ / Check if Node.js version meets requirements
- å°è¯•åˆ é™¤`node_modules`å’Œ`package-lock.json`åŽé‡æ–°å®‰è£…ä¾èµ–ï¼š / Try deleting `node_modules` and `package-lock.json` and reinstall dependencies:
  ```bash
  cd netdisk
  rm -rf node_modules package-lock.json
  npm install
  ```

### 9.2 åŽç«¯å¯åŠ¨å¤±è´¥
### 9.2 Backend Startup Failure
- æ£€æŸ¥Pythonè™šæ‹ŸçŽ¯å¢ƒæ˜¯å¦æ­£ç¡®æ¿€æ´» / Check if Python virtual environment is correctly activated
- æ£€æŸ¥ä¾èµ–æ˜¯å¦å…¨éƒ¨å®‰è£…ï¼š`pip install -r requirements.txt` / Check if all dependencies are installed: `pip install -r requirements.txt`
- æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`netstat -tulpn | grep 5000` / Check if port is occupied: `netstat -tulpn | grep 5000`
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š`gunicorn`è¾“å‡ºæˆ–ç³»ç»Ÿæ—¥å¿— / Check error logs: `gunicorn` output or system logs

### 9.3 æ–‡ä»¶ä¸Šä¼ å¤±è´¥
### 9.3 File Upload Failure
- æ£€æŸ¥å‰åŽç«¯`MAX_UPLOAD_SIZE`å’Œ`MAX_CONTENT_LENGTH`é…ç½®æ˜¯å¦ä¸€è‡´ / Check if `MAX_UPLOAD_SIZE` and `MAX_CONTENT_LENGTH` configurations are consistent between frontend and backend
- æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™ï¼š`chmod 755 netdisk-backend/uploads` / Check upload directory permissions: `chmod 755 netdisk-backend/uploads`
- æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³ / Check if there is sufficient disk space

### 9.4 æ•°æ®åº“è¿žæŽ¥é—®é¢˜
### 9.4 Database Connection Issues
- ç¡®ä¿æ•°æ®åº“æ–‡ä»¶å¯å†™ï¼š`chmod 664 netdisk-backend/netdisk.db` / Ensure database file is writable: `chmod 664 netdisk-backend/netdisk.db`
- æ£€æŸ¥`DATABASE_URI`é…ç½®æ˜¯å¦æ­£ç¡® / Check if `DATABASE_URI` configuration is correct

### 9.5 è®¿é—®é—®é¢˜
### 9.5 Access Issues
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œç¡®ä¿ç«¯å£(5000æˆ–80/443)å·²å¼€æ”¾ / Check firewall settings to ensure ports (5000 or 80/443) are open
- æ£€æŸ¥Nginxé…ç½®æ˜¯å¦æ­£ç¡® / Check if Nginx configuration is correct
- æ£€æŸ¥æœåŠ¡å™¨IPå’Œç«¯å£æ˜¯å¦æ­£ç¡® / Check if server IP and port are correct


éƒ¨ç½²å®ŒæˆåŽï¼Œé€šè¿‡æœåŠ¡å™¨IPæˆ–åŸŸåå³å¯è®¿é—®ç®€æ˜“ç½‘ç›˜æœåŠ¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡è¿è¡Œåœ¨5000ç«¯å£(ç›´æŽ¥è®¿é—®)æˆ–80/443ç«¯å£(é€šè¿‡Nginx)ã€‚
After deployment is complete, you can access the simple netdisk service through the server IP or domain name. By default, the service runs on port 5000 (direct access) or ports 80/443 (through Nginx).
## API æ–‡æ¡£ (API Documentation)

### æ–‡ä»¶ç®¡ç† API (File Management API)
| æ–¹æ³• (Method) | ç«¯ç‚¹ (Endpoint)              | æè¿° (Description)          | å‚æ•° (Parameters)               |
|---------------|------------------------------|------------------------------|----------------------------------|
| GET           | /api/files                   | èŽ·å–æ–‡ä»¶åˆ—è¡¨ (Get file list) | -                                |
| POST          | /api/files/upload            | ä¸Šä¼ æ–‡ä»¶ (Upload file)       | file: æ–‡ä»¶å¯¹è±¡ (File object)     |
| GET           | /api/files/{id}/download     | ä¸‹è½½æ–‡ä»¶ (Download file)     | id: æ–‡ä»¶ID (File ID)             |
| DELETE        | /api/files/{id}              | åˆ é™¤æ–‡ä»¶ (Delete file)       | id: æ–‡ä»¶ID (File ID)             |
| GET           | /api/files/search            | æœç´¢æ–‡ä»¶ (Search files)      | q: æœç´¢å…³é”®è¯ (Search query)     |

### å“åº”æ ¼å¼ (Response Format)
- æˆåŠŸå“åº” (Success Response):
  ```json
  {
    "success": true,
    "data": {...},
    "message": "æ“ä½œæˆåŠŸ"
  }
  ```
- é”™è¯¯å“åº” (Error Response):
  ```json
  {
    "success": false,
    "error": "é”™è¯¯ä¿¡æ¯",
    "code": 400
  }
  ```


## éƒ¨ç½²æŒ‡å— (Deployment Guide)

### ç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½² (Production Deployment)
- æž„å»ºå‰ç«¯ (Build frontend)
  ```bash
  cd netdisk
  npm run build
  ```
- é…ç½®åŽç«¯ (Configure backend)
  ```bash
  # å°†æž„å»ºæ–‡ä»¶å¤åˆ¶åˆ°åŽç«¯é™æ€ç›®å½•
  # Copy build files to backend static directory
  cp -r dist/* ../netdisk-backend/src/static/
  ```
- ä½¿ç”¨ Gunicorn éƒ¨ç½² (Deploy with Gunicorn)
  ```bash
  pip install gunicorn
  gunicorn -w 4 -b 0.0.0.0:5000 src.main:app
  ```

### Docker éƒ¨ç½² (Docker Deployment)
```dockerfile
# Dockerfile ç¤ºä¾‹ (Dockerfile example)
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .
EXPOSE 5000

CMD ["python", "src/main.py"]
```


## è´¡çŒ®æŒ‡å— (Contributing Guide)
æˆ‘ä»¬æ¬¢è¿Žæ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼(We welcome all forms of contributions!)

### å¦‚ä½•è´¡çŒ® (How to Contribute)
1. Fork é¡¹ç›® (Fork the project)
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (Create feature branch)
   ```bash
   git checkout -b feature/amazing-feature
   ```
3. æäº¤æ›´æ”¹ (Commit changes)
   ```bash
   git commit -m 'Add amazing feature'
   ```
4. æŽ¨é€åˆ†æ”¯ (Push branch)
   ```bash
   git push origin feature/amazing-feature
   ```
5. åˆ›å»º Pull Request (Create Pull Request)

### ä»£ç è§„èŒƒ (Code Standards)
- å‰ç«¯ (Frontend): ä½¿ç”¨ ESLint å’Œ Prettier
- åŽç«¯ (Backend): éµå¾ª PEP 8 è§„èŒƒ
- æäº¤ä¿¡æ¯ (Commit Messages): ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤è§„èŒƒ


## æ”¯æŒä¸Žåé¦ˆ (Support & Feedback)
- ðŸ› Bug æŠ¥å‘Š (Bug Reports): GitHub Issues
- ðŸ’¡ åŠŸèƒ½å»ºè®® (Feature Requests): GitHub Discussions



## å¼€å‘å›¢é˜Ÿ (Development Team)
hiyydd

## æœ€åŽæ›´æ–° (Last Updated)
2025å¹´8æœˆ

## ç‰ˆæœ¬ (Version)
1.3.0
