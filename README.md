# ç®€æ˜“ç½‘ç›˜ (Simple Netdisk)

â­ å¦‚æžœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹äº®å³ä¸Šè§’çš„ **Star** æ”¯æŒæˆ‘ä»¬ï¼æ‚¨çš„é¼“åŠ±æ˜¯æˆ‘ä»¬æŒç»­å¼€å‘çš„åŠ¨åŠ›ï¼


## è®¸å¯è¯ (License)
æœ¬é¡¹ç›®é‡‡ç”¨ **MIT è®¸å¯è¯** å¼€æºï¼Œå…è®¸è‡ªç”±ä½¿ç”¨ã€å¤åˆ¶ã€ä¿®æ”¹ã€åˆ†å‘åŠç”¨äºŽå•†ä¸šç”¨é€”ï¼Œä»…éœ€åœ¨è¡ç”Ÿä½œå“ä¸­ä¿ç•™åŽŸä½œè€…çš„ç‰ˆæƒå£°æ˜Žï¼ˆå…·ä½“æ¡æ¬¾è¯·å‚è€ƒä»“åº“å†… LICENSE æ–‡ä»¶ï¼‰ã€‚


## ç®€ä»‹ (Introduction)
è¿™æ˜¯ä¸€ä¸ªåŸºäºŽ React å’Œ Flask æž„å»ºçš„ç®€æ˜“ç½‘ç›˜åº”ç”¨ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå®‰å…¨ã€ç®€å•ã€å…è´¹çš„æ–‡ä»¶å­˜å‚¨æœåŠ¡ã€‚å®ƒæ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼çš„ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤å’Œæœç´¢åŠŸèƒ½ï¼Œå¹¶å…·å¤‡å“åº”å¼è®¾è®¡ï¼Œå…¼å®¹æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡ã€‚

This is a simple netdisk application built with React and Flask, aiming to provide a secure, simple, and free file storage service. It supports uploading, downloading, deleting, and searching various file formats, and features a responsive design compatible with both desktop and mobile devices.


## åŠŸèƒ½ç‰¹æ€§ (Features)
- âœ¨ æ–‡ä»¶ä¸Šä¼  (File Upload)ï¼šæ”¯æŒæ‹–æ‹½å’Œç‚¹å‡»ä¸Šä¼ å¤šç§æ–‡ä»¶æ ¼å¼
- ðŸ“ æ–‡ä»¶åˆ—è¡¨ (File Listing)ï¼šæ˜¾ç¤ºå·²ä¸Šä¼ çš„æ–‡ä»¶ï¼ŒåŒ…å«æ–‡ä»¶åã€å¤§å°ã€ä¸Šä¼ æ—¶é—´
- â¬‡ï¸ æ–‡ä»¶ä¸‹è½½ (File Download)ï¼šæ”¯æŒä¸‹è½½å·²ä¸Šä¼ çš„æ–‡ä»¶
- ðŸ—‘ï¸ æ–‡ä»¶åˆ é™¤ (File Deletion)ï¼šæ”¯æŒåˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶
- ðŸ” æ–‡ä»¶æœç´¢ (File Search)ï¼šå®žæ—¶æœç´¢æ–‡ä»¶å
- ðŸŒ“ ä¸»é¢˜åˆ‡æ¢ (Theme Toggle)ï¼šæ”¯æŒæ˜Žæš—ä¸»é¢˜åˆ‡æ¢
- ðŸ“± å“åº”å¼è®¾è®¡ (Responsive Design)ï¼šå…¼å®¹æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡


## ç³»ç»Ÿè¦æ±‚ (System Requirements)

### å¿…éœ€è½¯ä»¶ (Required Software)
| è½¯ä»¶ (Software) | æœ€ä½Žç‰ˆæœ¬ (Minimum Version) | æŽ¨èç‰ˆæœ¬ (Recommended Version) | ä¸‹è½½é“¾æŽ¥ (Download Link)       |
|-----------------|----------------------------|--------------------------------|--------------------------------|
| Node.js         | 16.0.0                     | 18.0.0+                        | [nodejs.org](https://nodejs.org) |
| Python          | 3.8.0                      | 3.11.0+                        | [python.org](https://python.org) |
| npm             | 8.0.0                      | 9.0.0+                        | éš Node.js å®‰è£… (Included with Node.js) |
| Git             | 2.20.0                     | æœ€æ–°ç‰ˆ (Latest)                | [git-scm.com](https://git-scm.com) |

### æ”¯æŒçš„æ“ä½œç³»ç»Ÿ (Supported Operating Systems)
- âœ… Windows 10/11 (x64)
- âœ… macOS 10.15+ (Intel/Apple Silicon)
- âœ… Linux (Ubuntu 18.04+, CentOS 7+, Debian 10+)

### æµè§ˆå™¨æ”¯æŒ (Browser Support)
- âœ… Chrome 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… Edge 90+


## æŠ€æœ¯æ ˆ (Technology Stack)

### å‰ç«¯ (Frontend)
- React 18 - çŽ°ä»£åŒ–çš„å‰ç«¯æ¡†æž¶ (Modern frontend framework)
- Vite - å¿«é€Ÿçš„æž„å»ºå·¥å…· (Fast build tool)
- Tailwind CSS - å®žç”¨ä¼˜å…ˆçš„CSSæ¡†æž¶ (Utility-first CSS framework)
- Lucide React - çŽ°ä»£åŒ–çš„å›¾æ ‡åº“ (Modern icon library)
- shadcn/ui - é«˜è´¨é‡çš„UIç»„ä»¶åº“ (High-quality UI component library)

### åŽç«¯ (Backend)
- Flask - è½»é‡çº§çš„Python Webæ¡†æž¶ (Lightweight Python web framework)
- SQLAlchemy - Python SQLå·¥å…·åŒ…å’ŒORM (Python SQL toolkit and ORM)
- Flask-CORS - è·¨åŸŸèµ„æºå…±äº«æ”¯æŒ (Cross-origin resource sharing support)
- SQLite - è½»é‡çº§æ•°æ®åº“ (Lightweight database)


## é¡¹ç›®ç»“æž„ (Project Structure)
```
netdisk-project/
â”œâ”€â”€ netdisk/                    # å‰ç«¯é¡¹ç›® (Frontend project)
â”‚   â”œâ”€â”€ public/                 # é™æ€èµ„æº (Static assets)
â”‚   â”‚   â””â”€â”€ favicon.ico
â”‚   â”œâ”€â”€ src/                    # æºä»£ç  (Source code)
â”‚   â”‚   â”œâ”€â”€ components/         # Reactç»„ä»¶ (React components)
â”‚   â”‚   â”‚   â”œâ”€â”€ FileList.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUpload.jsx
â”‚   â”‚   â”‚   â””â”€â”€ SearchBar.jsx
â”‚   â”‚   â”œâ”€â”€ assets/             # é™æ€èµ„æº (Static assets)
â”‚   â”‚   â”œâ”€â”€ App.jsx             # ä¸»åº”ç”¨ç»„ä»¶ (Main app component)
â”‚   â”‚   â”œâ”€â”€ main.jsx            # å…¥å£æ–‡ä»¶ (Entry file)
â”‚   â”‚   â””â”€â”€ index.css           # å…¨å±€æ ·å¼ (Global styles)
â”‚   â”œâ”€â”€ index.html              # HTMLæ¨¡æ¿ (HTML template)
â”‚   â”œâ”€â”€ package.json            # npmåŒ…é…ç½® (npm package config)
â”‚   â”œâ”€â”€ vite.config.js          # Viteé…ç½® (Vite configuration)
â”‚   â””â”€â”€ tailwind.config.js      # Tailwindé…ç½® (Tailwind config)
â”œâ”€â”€ netdisk-backend/            # åŽç«¯é¡¹ç›® (Backend project)
â”‚   â”œâ”€â”€ src/                    # æºä»£ç  (Source code)
â”‚   â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡åž‹ (Data models)
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py         # ç”¨æˆ·æ¨¡åž‹ (User model)
â”‚   â”‚   â”‚   â””â”€â”€ file.py         # æ–‡ä»¶æ¨¡åž‹ (File model)
â”‚   â”‚   â”œâ”€â”€ routes/             # APIè·¯ç”± (API routes)
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py         # ç”¨æˆ·API (User APIs)
â”‚   â”‚   â”‚   â””â”€â”€ files.py        # æ–‡ä»¶API (File APIs)
â”‚   â”‚   â”œâ”€â”€ services/           # ä¸šåŠ¡æœåŠ¡ (Business services)
â”‚   â”‚   â”‚   â””â”€â”€ google_drive.py # Google DriveæœåŠ¡ (Google Drive service)
â”‚   â”‚   â”œâ”€â”€ static/             # é™æ€æ–‡ä»¶ (Static files)
â”‚   â”‚   â””â”€â”€ main.py             # Flaskåº”ç”¨å…¥å£ (Flask app entry)
â”‚   â”œâ”€â”€ requirements.txt        # Pythonä¾èµ– (Python dependencies)
â”‚   â””â”€â”€ venv/                   # Pythonè™šæ‹ŸçŽ¯å¢ƒ (Python virtual environment)
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜Ž (Project documentation)
```


# ç®€æ˜“ç½‘ç›˜ (Simple Netdisk) å®Œæ•´éƒ¨ç½²æŒ‡å—

## ç›®å½•
1. [çŽ¯å¢ƒå‡†å¤‡](#1-çŽ¯å¢ƒå‡†å¤‡)
2. [æºç èŽ·å–](#2-æºç èŽ·å–)
3. [å‰ç«¯éƒ¨ç½²](#3-å‰ç«¯éƒ¨ç½²)
4. [åŽç«¯éƒ¨ç½²](#4-åŽç«¯éƒ¨ç½²)
5. [é…ç½®è¯´æ˜Ž](#5-é…ç½®è¯´æ˜Ž)
6. [Dockerä¸€ç«™å¼éƒ¨ç½²](#6-dockerä¸€ç«™å¼éƒ¨ç½²)
7. [Nginxåå‘ä»£ç†é…ç½®](#7-nginxåå‘ä»£ç†é…ç½®)
8. [å¸¸è§é—®é¢˜æŽ’æŸ¥](#8-å¸¸è§é—®é¢˜æŽ’æŸ¥)


## 1. çŽ¯å¢ƒå‡†å¤‡

### 1.1 å¿…å¤‡å·¥å…·åŠç‰ˆæœ¬è¦æ±‚
- **Git**ï¼šâ‰¥2.20.0
- **Node.js**ï¼šâ‰¥16.0.0 (æŽ¨è18.0.0+)
- **npm**ï¼šâ‰¥8.0.0 (éšNode.jså®‰è£…)
- **Python**ï¼šâ‰¥3.8.0 (æŽ¨è3.11.0+)
- **pip**ï¼šPythonåŒ…ç®¡ç†å·¥å…· (é€šå¸¸éšPythonå®‰è£…)
- **Docker** (å¯é€‰)ï¼šâ‰¥20.10.0 (ç”¨äºŽå®¹å™¨åŒ–éƒ¨ç½²)
- **Docker Compose** (å¯é€‰)ï¼šâ‰¥v2.0.0

### 1.2 æ“ä½œç³»ç»Ÿæ”¯æŒ
- Windows 10/11 (x64)
- macOS 10.15+ (Intel/Apple Silicon)
- Linux (Ubuntu 18.04+, CentOS 7+, Debian 10+)

### 1.3 å®‰è£…å‘½ä»¤

#### Ubuntu/Debian
```bash
# æ›´æ–°ç³»ç»Ÿ
sudo apt update && sudo apt upgrade -y

# å®‰è£…Git
sudo apt install git -y

# å®‰è£…Node.jså’Œnpm (ä½¿ç”¨NodeSource)
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs

# å®‰è£…PythonåŠç›¸å…³å·¥å…·
sudo apt install python3 python3-pip python3-venv -y
```

#### CentOS/RHEL
```bash
# å®‰è£…Git
sudo yum install git -y

# å®‰è£…Node.jså’Œnpm
curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo -E bash -
sudo yum install nodejs -y

# å®‰è£…PythonåŠç›¸å…³å·¥å…·
sudo yum install python3 python3-pip -y
```

#### macOS (ä½¿ç”¨Homebrew)
```bash
# å®‰è£…Homebrew (å¦‚æœªå®‰è£…)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£…æ‰€éœ€å·¥å…·
brew install git node@18 python3
```

#### Windows
- Git: ä¸‹è½½å¹¶å®‰è£… [Git for Windows](https://git-scm.com/download/win)
- Node.js: ä¸‹è½½å¹¶å®‰è£… [Node.js 18.x](https://nodejs.org/en/download/)
- Python: ä¸‹è½½å¹¶å®‰è£… [Python 3.11](https://www.python.org/downloads/)
  > å®‰è£…æ—¶å‹¾é€‰ "Add Python to PATH"


## 2. æºç èŽ·å–

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/hiyydd/pan.git
cd pan
```


## 3. å‰ç«¯éƒ¨ç½²

å‰ç«¯é¡¹ç›®ä½äºŽ `netdisk` ç›®å½•ï¼ŒåŸºäºŽReactå’ŒViteæž„å»ºã€‚

### 3.1 å®‰è£…ä¾èµ–
```bash
cd netdisk
npm install
```

### 3.2 é…ç½®å‰ç«¯çŽ¯å¢ƒ
åˆ›å»ºå¹¶é…ç½®çŽ¯å¢ƒå˜é‡æ–‡ä»¶ï¼š
```bash
# åœ¨netdiskç›®å½•ä¸‹åˆ›å»º.env.productionæ–‡ä»¶
cat > .env.production << EOF
# APIåŸºç¡€è·¯å¾„ï¼Œæ ¹æ®å®žé™…åŽç«¯åœ°å€ä¿®æ”¹
VITE_API_BASE_URL=/api
# ç½‘ç«™æ ‡é¢˜
VITE_APP_TITLE=ç®€æ˜“ç½‘ç›˜
# æœ€å¤§ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶(MB)
VITE_MAX_UPLOAD_SIZE=1024
EOF
```

### 3.3 æž„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# æ‰§è¡Œæž„å»ºå‘½ä»¤
npm run build
```

æž„å»ºå®ŒæˆåŽï¼Œä¼šåœ¨ `netdisk/dist` ç›®å½•ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å°†è¢«åŽç«¯æœåŠ¡å¼•ç”¨ã€‚


## 4. åŽç«¯éƒ¨ç½²

åŽç«¯é¡¹ç›®ä½äºŽ `netdisk-backend` ç›®å½•ï¼ŒåŸºäºŽFlaskæž„å»ºã€‚

### 4.1 å‡†å¤‡Pythonè™šæ‹ŸçŽ¯å¢ƒ
```bash
# è¿”å›žé¡¹ç›®æ ¹ç›®å½•
cd ..
# è¿›å…¥åŽç«¯ç›®å½•
cd netdisk-backend
# åˆ›å»ºè™šæ‹ŸçŽ¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒ
# Linux/macOS
source venv/bin/activate
# Windows (PowerShell)
.\venv\Scripts\Activate.ps1
# Windows (Command Prompt)
venv\Scripts\activate.bat
```

### 4.2 å®‰è£…åŽç«¯ä¾èµ–
```bash
pip install -r requirements.txt
# ç”Ÿäº§çŽ¯å¢ƒå»ºè®®å®‰è£…Gunicornä½œä¸ºWSGIæœåŠ¡å™¨
pip install gunicorn
```

### 4.3 é…ç½®åŽç«¯çŽ¯å¢ƒ
```bash
# åœ¨netdisk-backendç›®å½•ä¸‹åˆ›å»º.envæ–‡ä»¶
cat > .env << EOF
#  Flaské…ç½®
FLASK_APP=src.main:app
FLASK_ENV=production
SECRET_KEY=your_secure_secret_key_here  # æ›´æ¢ä¸ºéšæœºå®‰å…¨å¯†é’¥

# æ•°æ®åº“é…ç½®
DATABASE_URI=sqlite:///./netdisk.db  # SQLiteæ•°æ®åº“è·¯å¾„

# æ–‡ä»¶å­˜å‚¨é…ç½®
UPLOAD_FOLDER=./uploads  # æ–‡ä»¶ä¸Šä¼ ç›®å½•
MAX_CONTENT_LENGTH=1073741824  # 1GBï¼Œä¸Žå‰ç«¯ä¿æŒä¸€è‡´

# æœåŠ¡å™¨é…ç½®
HOST=0.0.0.0
PORT=5000
EOF
```

### 4.4 å¤åˆ¶å‰ç«¯æž„å»ºäº§ç‰©åˆ°åŽç«¯
```bash
# ç¡®ä¿å·²æ¿€æ´»è™šæ‹ŸçŽ¯å¢ƒï¼Œåœ¨netdisk-backendç›®å½•æ‰§è¡Œ
# åˆ›å»ºé™æ€æ–‡ä»¶ç›®å½•(å¦‚ä¸å­˜åœ¨)
mkdir -p src/static
# å¤åˆ¶å‰ç«¯æž„å»ºäº§ç‰©
cp -r ../netdisk/dist/* src/static/
```

### 4.5 åˆå§‹åŒ–æ•°æ®åº“
```bash
# è¿›å…¥Pythonäº¤äº’æ¨¡å¼
python3

# åœ¨Pythonäº¤äº’çŽ¯å¢ƒä¸­æ‰§è¡Œ
from src.main import app
from src.models import db
with app.app_context():
    db.create_all()
exit()
```

### 4.6 å¯åŠ¨åŽç«¯æœåŠ¡

#### å¼€å‘çŽ¯å¢ƒå¯åŠ¨ (ä»…ç”¨äºŽæµ‹è¯•)
```bash
flask run --host=0.0.0.0 --port=5000
```

#### ç”Ÿäº§çŽ¯å¢ƒå¯åŠ¨ (ä½¿ç”¨Gunicorn)
```bash
# 4ä¸ªå·¥ä½œè¿›ç¨‹ï¼Œç»‘å®šåˆ°5000ç«¯å£
gunicorn -w 4 -b 0.0.0.0:5000 "src.main:app"
```

#### ä½¿ç”¨systemdç®¡ç†æœåŠ¡ (Linux)
åˆ›å»ºæœåŠ¡æ–‡ä»¶ï¼š
```bash
sudo nano /etc/systemd/system/netdisk.service
```

æ–‡ä»¶å†…å®¹ï¼š
```ini
[Unit]
Description=Simple Netdisk Service
After=network.target

[Service]
User=your_username
Group=your_group
WorkingDirectory=/path/to/pan/netdisk-backend
ExecStart=/path/to/pan/netdisk-backend/venv/bin/gunicorn -w 4 -b 0.0.0.0:5000 "src.main:app"
Restart=always

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
sudo systemctl daemon-reload
sudo systemctl start netdisk
sudo systemctl enable netdisk  # è®¾ç½®å¼€æœºè‡ªå¯
```


## 5. é…ç½®è¯´æ˜Ž

### 5.1 å‰ç«¯å…³é”®é…ç½®æ–‡ä»¶
- `netdisk/vite.config.js`: Viteæž„å»ºé…ç½®ï¼ŒåŒ…å«ä»£ç†è®¾ç½®ç­‰
- `netdisk/.env.production`: ç”Ÿäº§çŽ¯å¢ƒå˜é‡é…ç½®
- `netdisk/tailwind.config.js`: Tailwind CSSé…ç½®

### 5.2 åŽç«¯å…³é”®é…ç½®æ–‡ä»¶
- `netdisk-backend/src/main.py`: Flaskåº”ç”¨å…¥å£ï¼ŒåŒ…å«è·¯ç”±æ³¨å†Œ
- `netdisk-backend/src/models/__init__.py`: æ•°æ®åº“æ¨¡åž‹å®šä¹‰
- `netdisk-backend/src/routes/file_routes.py`: æ–‡ä»¶æ“ä½œAPIè·¯ç”±
- `netdisk-backend/.env`: åŽç«¯çŽ¯å¢ƒå˜é‡é…ç½®


## 6. Dockerä¸€ç«™å¼éƒ¨ç½²

### 6.1 æž„å»ºDockeré•œåƒ

é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º `Dockerfile`ï¼š
```dockerfile
# æž„å»ºå‰ç«¯
FROM node:18-alpine AS frontend-build
WORKDIR /app/netdisk
COPY netdisk/package*.json ./
RUN npm install
COPY netdisk/ ./
RUN npm run build

# æž„å»ºåŽç«¯
FROM python:3.11-slim
WORKDIR /app

# å¤åˆ¶å‰ç«¯æž„å»ºäº§ç‰©
COPY --from=frontend-build /app/netdisk/dist ./netdisk-backend/src/static

# å¤åˆ¶åŽç«¯ä»£ç 
COPY netdisk-backend/ ./netdisk-backend
WORKDIR /app/netdisk-backend

# å®‰è£…åŽç«¯ä¾èµ–
RUN pip install --no-cache-dir -r requirements.txt
RUN pip install gunicorn

# åˆ›å»ºæ•°æ®å’Œä¸Šä¼ ç›®å½•
RUN mkdir -p uploads
RUN touch netdisk.db

# é…ç½®çŽ¯å¢ƒå˜é‡
ENV FLASK_APP=src.main:app
ENV FLASK_ENV=production
ENV SECRET_KEY=default_docker_secret_key
ENV DATABASE_URI=sqlite:///./netdisk.db
ENV UPLOAD_FOLDER=./uploads
ENV MAX_CONTENT_LENGTH=1073741824

EXPOSE 5000

# å¯åŠ¨æœåŠ¡
CMD ["gunicorn", "-w", "4", "-b", "0.0.0.0:5000", "src.main:app"]
```

### 6.2 æž„å»ºå¹¶è¿è¡Œå®¹å™¨
```bash
# æž„å»ºé•œåƒ
docker build -t simple-netdisk:latest .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name simple-netdisk \
  -p 5000:5000 \
  -v ./netdisk-backend/uploads:/app/netdisk-backend/uploads \
  -v ./netdisk-backend/netdisk.db:/app/netdisk-backend/netdisk.db \
  -e SECRET_KEY="your_secure_secret_key" \
  simple-netdisk:latest
```

### 6.3 ä½¿ç”¨Docker Compose (æŽ¨è)

åˆ›å»º `docker-compose.yml`ï¼š
```yaml
version: '3.8'

services:
  netdisk:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: simple-netdisk
    restart: always
    ports:
      - "5000:5000"
    environment:
      - SECRET_KEY=your_secure_secret_key_here
      - DATABASE_URI=sqlite:///./netdisk.db
      - UPLOAD_FOLDER=./uploads
      - MAX_CONTENT_LENGTH=1073741824
    volumes:
      - netdisk-uploads:/app/netdisk-backend/uploads
      - netdisk-db:/app/netdisk-backend

volumes:
  netdisk-uploads:
  netdisk-db:
```

å¯åŠ¨æœåŠ¡ï¼š
```bash
docker-compose up -d
```


## 7. Nginxåå‘ä»£ç†é…ç½®

ä¸ºæå‡å®‰å…¨æ€§å’Œæ€§èƒ½ï¼ŒæŽ¨èä½¿ç”¨Nginxä½œä¸ºåå‘ä»£ç†ã€‚

åˆ›å»ºNginxé…ç½®æ–‡ä»¶ï¼š
```bash
sudo nano /etc/nginx/sites-available/netdisk
```

é…ç½®å†…å®¹ï¼š
```nginx
server {
    listen 80;
    server_name your_domain.com;  # æ›¿æ¢ä¸ºä½ çš„åŸŸåæˆ–æœåŠ¡å™¨IP

    # é‡å®šå‘åˆ°HTTPS (å¯é€‰)
    # return 301 https://$host$request_uri;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # é™åˆ¶ä¸Šä¼ æ–‡ä»¶å¤§å°
    client_max_body_size 1G;
}

# HTTPSé…ç½®ç¤ºä¾‹ (éœ€è¦SSLè¯ä¹¦)
# server {
#     listen 443 ssl;
#     server_name your_domain.com;
#
#     ssl_certificate /path/to/your/cert.pem;
#     ssl_certificate_key /path/to/your/key.pem;
#
#     location / {
#         proxy_pass http://127.0.0.1:5000;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
#
#     client_max_body_size 1G;
# }
```

å¯ç”¨é…ç½®ï¼š
```bash
sudo ln -s /etc/nginx/sites-available/netdisk /etc/nginx/sites-enabled/
sudo nginx -t  # æµ‹è¯•é…ç½®
sudo systemctl restart nginx
```


## 8. å¸¸è§é—®é¢˜æŽ’æŸ¥

### 8.1 å‰ç«¯æž„å»ºå¤±è´¥
- æ£€æŸ¥Node.jsç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
- å°è¯•åˆ é™¤`node_modules`å’Œ`package-lock.json`åŽé‡æ–°å®‰è£…ä¾èµ–ï¼š
  ```bash
  cd netdisk
  rm -rf node_modules package-lock.json
  npm install
  ```

### 8.2 åŽç«¯å¯åŠ¨å¤±è´¥
- æ£€æŸ¥Pythonè™šæ‹ŸçŽ¯å¢ƒæ˜¯å¦æ­£ç¡®æ¿€æ´»
- æ£€æŸ¥ä¾èµ–æ˜¯å¦å…¨éƒ¨å®‰è£…ï¼š`pip install -r requirements.txt`
- æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`netstat -tulpn | grep 5000`
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š`gunicorn`è¾“å‡ºæˆ–ç³»ç»Ÿæ—¥å¿—

### 8.3 æ–‡ä»¶ä¸Šä¼ å¤±è´¥
- æ£€æŸ¥å‰åŽç«¯`MAX_UPLOAD_SIZE`å’Œ`MAX_CONTENT_LENGTH`é…ç½®æ˜¯å¦ä¸€è‡´
- æ£€æŸ¥ä¸Šä¼ ç›®å½•æƒé™ï¼š`chmod 755 netdisk-backend/uploads`
- æ£€æŸ¥ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³

### 8.4 æ•°æ®åº“è¿žæŽ¥é—®é¢˜
- ç¡®ä¿æ•°æ®åº“æ–‡ä»¶å¯å†™ï¼š`chmod 664 netdisk-backend/netdisk.db`
- æ£€æŸ¥`DATABASE_URI`é…ç½®æ˜¯å¦æ­£ç¡®

### 8.5 è®¿é—®é—®é¢˜
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œç¡®ä¿ç«¯å£(5000æˆ–80/443)å·²å¼€æ”¾
- æ£€æŸ¥Nginxé…ç½®æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æœåŠ¡å™¨IPå’Œç«¯å£æ˜¯å¦æ­£ç¡®


éƒ¨ç½²å®ŒæˆåŽï¼Œé€šè¿‡æœåŠ¡å™¨IPæˆ–åŸŸåå³å¯è®¿é—®ç®€æ˜“ç½‘ç›˜æœåŠ¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡è¿è¡Œåœ¨5000ç«¯å£(ç›´æŽ¥è®¿é—®)æˆ–80/443ç«¯å£(é€šè¿‡Nginx)ã€‚
## API æ–‡æ¡£ (API Documentation)

### æ–‡ä»¶ç®¡ç† API (File Management API)
| æ–¹æ³• (Method) | ç«¯ç‚¹ (Endpoint)              | æè¿° (Description)          | å‚æ•° (Parameters)               |
|---------------|------------------------------|------------------------------|----------------------------------|
| GET           | /api/files                   | èŽ·å–æ–‡ä»¶åˆ—è¡¨ (Get file list) | -                                |
| POST          | /api/files/upload            | ä¸Šä¼ æ–‡ä»¶ (Upload file)       | file: æ–‡ä»¶å¯¹è±¡ (File object)     |
| GET           | /api/files/{id}/download     | ä¸‹è½½æ–‡ä»¶ (Download file)     | id: æ–‡ä»¶ID (File ID)             |
| DELETE        | /api/files/{id}              | åˆ é™¤æ–‡ä»¶ (Delete file)       | id: æ–‡ä»¶ID (File ID)             |
| GET           | /api/files/search            | æœç´¢æ–‡ä»¶ (Search files)      | q: æœç´¢å…³é”®è¯ (Search query)     |

### å“åº”æ ¼å¼ (Response Format)
- æˆåŠŸå“åº” (Success Response):
  ```json
  {
    "success": true,
    "data": {...},
    "message": "æ“ä½œæˆåŠŸ"
  }
  ```
- é”™è¯¯å“åº” (Error Response):
  ```json
  {
    "success": false,
    "error": "é”™è¯¯ä¿¡æ¯",
    "code": 400
  }
  ```


## éƒ¨ç½²æŒ‡å— (Deployment Guide)

### ç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½² (Production Deployment)
- æž„å»ºå‰ç«¯ (Build frontend)
  ```bash
  cd netdisk
  npm run build
  ```
- é…ç½®åŽç«¯ (Configure backend)
  ```bash
  # å°†æž„å»ºæ–‡ä»¶å¤åˆ¶åˆ°åŽç«¯é™æ€ç›®å½•
  # Copy build files to backend static directory
  cp -r dist/* ../netdisk-backend/src/static/
  ```
- ä½¿ç”¨ Gunicorn éƒ¨ç½² (Deploy with Gunicorn)
  ```bash
  pip install gunicorn
  gunicorn -w 4 -b 0.0.0.0:5000 src.main:app
  ```

### Docker éƒ¨ç½² (Docker Deployment)
```dockerfile
# Dockerfile ç¤ºä¾‹ (Dockerfile example)
FROM python:3.11-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .
EXPOSE 5000

CMD ["python", "src/main.py"]
```


## è´¡çŒ®æŒ‡å— (Contributing Guide)
æˆ‘ä»¬æ¬¢è¿Žæ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼(We welcome all forms of contributions!)

### å¦‚ä½•è´¡çŒ® (How to Contribute)
1. Fork é¡¹ç›® (Fork the project)
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (Create feature branch)
   ```bash
   git checkout -b feature/amazing-feature
   ```
3. æäº¤æ›´æ”¹ (Commit changes)
   ```bash
   git commit -m 'Add amazing feature'
   ```
4. æŽ¨é€åˆ†æ”¯ (Push branch)
   ```bash
   git push origin feature/amazing-feature
   ```
5. åˆ›å»º Pull Request (Create Pull Request)

### ä»£ç è§„èŒƒ (Code Standards)
- å‰ç«¯ (Frontend): ä½¿ç”¨ ESLint å’Œ Prettier
- åŽç«¯ (Backend): éµå¾ª PEP 8 è§„èŒƒ
- æäº¤ä¿¡æ¯ (Commit Messages): ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤è§„èŒƒ


## æ”¯æŒä¸Žåé¦ˆ (Support & Feedback)
- ðŸ› Bug æŠ¥å‘Š (Bug Reports): GitHub Issues
- ðŸ’¡ åŠŸèƒ½å»ºè®® (Feature Requests): GitHub Discussions



## å¼€å‘å›¢é˜Ÿ (Development Team)
hiyydd

## æœ€åŽæ›´æ–° (Last Updated)
2025å¹´8æœˆ

## ç‰ˆæœ¬ (Version)
1.3.0
